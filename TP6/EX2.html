<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exerice 2</title>
  </head>
  <body>
    <script>
      function merge(a, b) {
        for (const key in a) {
          if (b[key]) {
            if (typeof a[key] == "object") {
              Object.keys(a[key]).length > 1
                ? (a[key] = [...a[key]])
                : (a[key] = [a[key]]);
              Object.keys(b[key]).length > 1
                ? a[key].push(...b[key])
                : a[key].push(b[key]);
            }
            if (typeof a[key] == "number") {
              a[key] = [a[key]];
              typeof b[key] == "number"
                ? a[key].push(b[key])
                : a[key].push(...b[key]);
            }
            if (typeof a[key] == "string") {
              a[key] = [a[key]];
              typeof b[key] == "string"
                ? a[key].push(b[key])
                : a[key].push(...b[key]);
            }
          }
        }

        for (const key in b) {
          if (!a[key]) {
            a[key] = b[key];
          }
        }

        return a;
      }

      const object = {
        a: [{ x: 2 }, { y: 4 }],
        b: 1,
      };

      const other = {
        a: { z: 3 },
        b: [2, 3],
        c: "foo",
      };

      console.log(merge(object, other));
    </script>
  </body>
</html>
